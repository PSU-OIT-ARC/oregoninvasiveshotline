extends: emcee:commands.yml
project:
  name: invasives
  full_name: Oregon Invasives Hotline
python:
  package: oregoninvasiveshotline
  distribution: psu.oit.arc.oregoninvasiveshotline
iam:
  user: invasives
  uid: 1101
  gid: 1101
docker:
  dockerfiles:
    - docker/Dockerfile
remote:
  path:
    root: ${remote.deploy_root}/oregoninvasiveshotline
services:
  db:
    user: oregoninvasiveshotline_l
    name: oregoninvasiveshotline
  nginx:
    http_upstream: "http://app:8000"
    client_max_body_size: 8m
    access_control_origin: '*'
    static_expires_time: 1d
environment:
  dev:
    backend: emcee.backends.dev
  docker:
    backend: emcee.backends.docker
  stage:
    backend: emcee.backends.aws
    services:
      db:
        host: oregoninvasiveshotline-stage.c6xuiyamhpsi.us-west-2.rds.amazonaws.com
      nginx:
        media_root: /media
        static_root: /static
        csp_policy: 'default-src ''unsafe-inline'' data: invasives.stage.wdt.pdx.edu *.stage.wdt.pdx.edu cdnjs.cloudflare.com http://*.tiles.osgeo.org; script-src ''self'' ''unsafe-inline'' ''unsafe-eval'' https://*.googleapis.com https://*.gstatic.com *.google.com https://*.ggpht.com *.googleusercontent.com; img-src ''self'' https://*.googleapis.com https://*.gstatic.com *.google.com *.googleusercontent.com data:; frame-src *.google.com; connect-src ''self'' oregoninvasiveshotline.org *.sentry.io https://*.googleapis.com *.google.com https://*.gstatic.com data: blob:; font-src https://invasives.stage.wdt.pdx.edu https://fonts.gstatic.com; style-src ''self'' ''unsafe-inline'' https://fonts.googleapis.com'
        access_control_origin: https://invasives.stage.wdt.pdx.edu
  prod:
    backend: emcee.backends.aws
    services:
      db:
        host: oregoninvasiveshotline-prod.c6xuiyamhpsi.us-west-2.rds.amazonaws.com
      nginx:
        media_root: /media
        static_root: /static
        alt_fqdns: oregoninvasiveshotline.org
        csp_policy: 'default-src ''unsafe-inline'' data: oregoninvasiveshotline.org *.wdt.pdx.edu cdnjs.cloudflare.com http://*.tiles.osgeo.org; script-src ''self'' ''unsafe-inline'' ''unsafe-eval'' https://www.google-analytics.com https://ssl.google-analytics.com https://*.googleapis.com https://*.gstatic.com *.google.com https://*.ggpht.com *.googleusercontent.com; img-src ''self'' https://www.google-analytics.com https://*.googleapis.com https://*.gstatic.com *.google.com *.googleusercontent.com data:; frame-src *.google.com; connect-src ''self'' oregoninvasiveshotline.org *.sentry.io https://www.google-analytics.com https://*.googleapis.com *.google.com https://*.gstatic.com data: blob:; font-src https://oregoninvasiveshotline.org https://fonts.gstatic.com; style-src ''self'' ''unsafe-inline'' https://fonts.googleapis.com'
        access_control_origin: https://oregoninvasiveshotline.org
